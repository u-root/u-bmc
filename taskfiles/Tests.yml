version: '3'

vars:
  GO_SOURCE_DIRS: ./pkg/... ./platform/... ./cmd/... ./config/... ./helper/... ./boot/...

tasks:
  # Call go test on all files
  all:
    cmds:
      - go test {{.GO_SOURCE_DIRS}}

  # Call go test with coverage on all files
  coverage:
    cmds:
      - go test -cover {{.GO_SOURCE_DIRS}}

  # Run go test
  integration:
    dir: integration
    cmds:
      - go test

  # Call go test with race condition detection
  race:
    cmds:
      - go test -race {{.GO_SOURCE_DIRS}}
